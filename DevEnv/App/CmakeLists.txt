cmake_minimum_required(VERSION 3.22 FATAL_ERROR)
project(Test_Application VERSION 0.3 LANGUAGES C CXX)

# Add workflow Library prefix to CMAKE_PREFIX_PATH (already determined in root)
list(APPEND CMAKE_PREFIX_PATH "${Library_Path}")

find_package(WSML 0.4.0 REQUIRED)

#------------------------------------------------------------------------#
# Project Shortcut-variables
#------------------------------------------------------------------------#

set(APP_SRCS    
    # "${CMAKE_CURRENT_SOURCE_DIR}/Source/C_Lang_Demo/Main_Client.c"
    "${CMAKE_CURRENT_SOURCE_DIR}/Source/Main_Client.cpp"
    "${CMAKE_CURRENT_SOURCE_DIR}/Source/Demos/DWM_Examples_demo.cpp"
)
set(APP_HDRS
    "${CMAKE_CURRENT_SOURCE_DIR}/Include/DWM_Examples_demo.h"
    ""
)

set(CUDA_FILES
    "${CMAKE_CURRENT_SOURCE_DIR}/Source/CUDA__/cuda_kernal.cu"
)
#------------------------------------------------------------------------#
# Project Shortcut-variables
#------------------------------------------------------------------------#


#------------------------------------------------------------------------#
# Project Build-Helper function
#------------------------------------------------------------------------#

App_builder(${PROJECT_NAME}
    OUTPUT_DIR                          Client
    BUILD_DESTINATION_PATH              ${global_build_dir}
    
    # ONLY Enable in released Versions. for CLI removal.
    WIN32                               FALSE
    DEBUG_CONSOLE_INCLUSION_STATE       ENABLED
    
    EXPORT_FLAG                         ""
    CUDA_SEPARABLE_COMPILATION          OFF
    SOURCES                             ${APP_SRCS}
    HEADERS                             ${APP_HDRS}
    CUDA_SOURCES                        ${CUDA_FILES}

    PUBLIC_INCLUDES                     "${CMAKE_CURRENT_SOURCE_DIR}/Include"
    PRIVATE_INCLUDES                    "${CMAKE_CURRENT_SOURCE_DIR}/Internal"
    
    LINK_LIBS                           ws2_32 WSML::WSML CUDA::cudart
)

#------------------------------------------------------------------------#
# Project Build-Helper function
#------------------------------------------------------------------------#
